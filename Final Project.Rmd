---
title: "Final Project"
author: "Brenda Yang, Charlie Bonetti, Nour Kanaan"
date: "7/19/2020"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(gdata)
library(tidyverse)
library(sf)
library(readxl)
```

### data variables
```{r data, echo = FALSE}
dstate = read.xls("data/state depression rates 2020.xls")
astate = read.xls("data/State anxiety trends 2020.xls")
dtrends2020 = read.xls("data/April 2020 depression trends.xls")
dtrends2018 = read.xls("data/April 2018 depression trends.xls")
atrends2020 = read.xls("data/April 2020 anxiety trends.xls")
atrends2018 = read.xls("data/April 2018 anxiety trends.xls")
deathrate = read.csv("data/restriction rankings.csv")
covidrate = read_excel("data/April COVID Cases by State.xlsx")
```

### Comparing depression trends between April 2020 and April 2018
```{r, depression-year-comparison, echo = FALSE}
d2020 <- dtrends2020 %>% 
  select(depression) %>% 
  pull()

d2018 <- dtrends2018 %>% 
  select(depression) %>% 
  pull()

t.test(d2020, d2018, mu = 0, 
       alternative = "two.sided", 
       paired = TRUE, 
       var.equal = FALSE,
       conf.level = 0.95)
```

The null hypothesis is that there is no difference in the mean amount of depression searches in the US between the times of April 2020 and April 2018. The alternate hypothesis is that there is a difference between the two means. Assuming that the null hypothesis is true, the model follows a t-distribution. The t-statistic is 0.755 and the df = 29. This corresponds to a p-value of 0.4561. We cannot reject the null at the alpha = 0.05 level. We do not have enough evidence to claim that there is a difference in the mean amount of depression searches in the US between the times of April 2020 and April 2018. 

### Restriction vs. depression rate
```{r restriction-depression, echo = FALSE}

```



### Depression rate in each state map
```{r graph}
library(usmap)
library(ggplot2)

plot_usmap(data = dstate, values = "depression", color = "red") + 
  scale_fill_continuous(name = "depression searches", label = scales::comma) + 
  theme(legend.position = "right")
```


